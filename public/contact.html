<!DOCTYPE html>
<html>
<head>
	<title>Lesley's website - About Me</title>
	<!--Google Font-->
	<link href="https://fonts.googleapis.com/css?family=EB+Garamond" rel="stylesheet">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<!--CSS Reset file-->
	<link rel="stylesheet" type="text/css" href="assets/css/reset.css">
	<!--External CSS file-->
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
	<!--jQuery link-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>
<body>

<!--Logo-->
<div class="jumbotron">
  <img src="https://raw.githubusercontent.com/REvanCof/COAMG/master/public/assets/img/COA_MontessoriGuide.jpg">
</div>

<!--Header, with links to Home, About Me, Resources, and Projects-->
<div id="header">
	<a href="index.html" class="navBarLink">Home</a>
	<a href="projects.html" class="navBarLink">Projects</a>
	<a href="resources.html" class="navBarLink">Resources</a>
	<a href="aboutMe.html" class="navBarLink">About Me</a>
	<a href="contact.html" class="navBarLink" style="color: rgb(255,133,189);">Contact</a>
</div>

<!--Main page content-->
<div id="mainSection">
	<div id="contact">
		<br>
		<h1>Contact me</h1>
		<br>
		<form method="POST" name="contactform" id="contactform" action="nodemailer.js"> <!--Doing two things on submit.  This, plus sendEmail() below-->
		<p>
		<label for='name'>Your name:</label> <br>
		<input type="text" name="name" class="contactMeField"><br><br>
		</p>
		<p>
		<label for='email'>Your email address:</label> <br>
		<input type="text" name="email" class="contactMeField"><br><br>
		</p>
		<p>
		<label for='message'>Your message:</label> <br>
		<textarea name="message" class="contactMeMessage"></textarea><br><br>
		</p>
		<input type="submit" value="Send message" onclick="sendEmail()"><br><br> <!--Doing two things on submit.  This, plus POST above-->
		</form>


		<script type="text/javascript">
			function sendEmail() {
				var x = document.getElementById("contactform").submit();// Form submission
				'use strict';
				const nodemailer = require('nodemailer');

				//These three must all be strings
				var email = x.email; //Waiting...
				var name = x.name; //Waiting...
				var message = x.message; //Waiting...

				// create reusable transporter object using the default SMTP transport
				let transporter = nodemailer.createTransport({
				    service: 'yahoo',
				    auth: {
				        user: 'molander16@yahoo.com',
				        pass: 'A6d4$nJKD2'
				    }
				});

				// setup email data with unicode symbols
				let mailOptions = {
				    from: email, // sender email
				    to: 'lesleyawilliams7@gmail.com', // list of receivers
				    subject: 'COAMG Email from ' + name, // Subject line including sender name
				    text: message, // plain text body using message contents
				    html: '' // html body left blank
				};

				// send mail with defined transport object
				transporter.sendMail(mailOptions, (error, info) => {
				    if (error) {
				        return console.log(error);
				    }
				    console.log('Message %s sent: %s', info.messageId, info.response);
				});
			}
		</script>
	</div>
</div>

<!--Footer-->
<div id="footer">
Lesley Williams and Evan Coffey - 2017
</div>

</body>
</html>